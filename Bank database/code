create database bank_172;
use bank_172;
create table branch_172
(
branch_name varchar(25),
branch_city varchar(15),
assets int,
primary key(branch_name)
);

create table bankAccount_172
(
accno int,
branch_name varchar(25),
balance int,
primary key(accno),
foreign key(branch_name) references branch_172(branch_name)
);

create table bankCustomer_172
(
customer_name varchar(10),
customer_street varchar(25),
customer_city varchar(15),
primary key(customer_name)
);

create table depositer_172
(
customer_name varchar(10),
accno int,
foreign key(customer_name) references bankCustomer_172(customer_name),
foreign key(accno) references bankAccount_172(accno)
);

create table loan_172
(
loan_number int,
branch_name varchar(25),
amount int,
primary key(loan_number),
foreign key(branch_name) references branch_172(branch_name)
);

insert into branch_172 values('SBI_chamrajpet','Bangalore',5000);
insert into branch_172 values('SBI_residencyRoad','Bangalore',10000);
insert into branch_172 values('SBI_shivajiRoad','Bombay',20000);
insert into branch_172 values('SBI_parlimentRoad','delhi',10000);
insert into branch_172 values('SBI_jantarmantar','delhi',20000);

insert into bankAccount_172 values(1,'SBI_chamrajpet',2000);
insert into bankAccount_172 values(2,'SBI_residencyRoad',5000);
insert into bankAccount_172 values(3,'SBI_shivajiRoad',6000);
insert into bankAccount_172 values(4,'SBI_parlimentRoad',9000);
insert into bankAccount_172 values(5,'SBI_jantarmantar',8000);
insert into bankAccount_172 values(6,'SBI_shivajiRoad',4000);
insert into bankAccount_172 values(8,'SBI_residencyRoad',4000);
insert into bankAccount_172 values(9,'SBI_parlimentRoad',3000);
insert into bankAccount_172 values(10,'SBI_residencyRoad',5000);
insert into bankAccount_172 values(11,'SBI_jantarmantar',2000);

insert into bankCustomer_172 values('avinash','BullTempleRoad','Bangalore');
insert into bankCustomer_172 values('dinesh','BannergattaRoad','Bangalore');
insert into bankCustomer_172 values('mohan','nationalCollegeRoad','Bangalore');
insert into bankCustomer_172 values('nikil','AkbarRoad','Delhi');
insert into bankCustomer_172 values('ravi','pritvirajRoad','Delhi');

insert into depositer_172 values('avinash',1);
insert into depositer_172 values('dinesh',2);
insert into depositer_172 values('nikil',4);
insert into depositer_172 values('ravi',5);
insert into depositer_172 values('avinash',8);
insert into depositer_172 values('nikil',9);
insert into depositer_172 values('dinesh',10);
insert into depositer_172 values('nikil',11);

insert into loan_172 values(1,'SBI_chamrajpet',1000);
insert into loan_172 values(2,'SBI_residencyRoad',2000);
insert into loan_172 values(3,'SBI_shivajiRoad',3000);
insert into loan_172 values(4,'SBI_parlimentRoad',4000);
insert into loan_172 values(5,'SBI_jantarmantar',5000);

select * from branch_172;
select * from bankAccount_172;
select * from bankCustomer_172;
select * from depositer_172;
select * from loan_172;

alter table branch_172 rename column assets to assets_inlakhs;
select branch_name,assets_inlakhs from branch_172;

select d.customer_name from depositer_172 d,bankAccount_172 b
where b.branch_name='SBI_residencyRoad' and d.accno=b.accno group by d.customer_name
having count(d.accno)>=2;

create view br
as
select branch_name,sum(amount) from loan_172
group by branch_name;
select * from br;
